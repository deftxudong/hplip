#
#  configure.in - hplip autoconf input file
# 
#  (c) 2004 Copyright Hewlett-Packard Development Company, LP
#

AC_INIT(hplip, 0.8.7)
AC_CONFIG_SRCDIR([io/hpiod/hpiod.cpp])
AC_CONFIG_AUX_DIR(.)
AC_PROG_INSTALL
AC_PROG_MAKE_SET
AC_CONFIG_SUBDIRS(prnt prnt/hpijs io/hpiod backend/hp base data scan ui ip scan/sane pcard)

BINSEARCHPATH="/bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/sbin /usr/lib/lsb"

AC_MSG_CHECKING([for chkconfig])
CHKCONFIG_PATH=""
for i in $BINSEARCHPATH; do
   if test -e "$i/chkconfig"; then
      CHKCONFIG_PATH="$i"
      break
   fi
done
if test "$CHKCONFIG_PATH" != ""; then
   AC_MSG_RESULT([found in $CHKCONFIG_PATH])
else
   AC_MSG_RESULT(no)
fi

AC_MSG_CHECKING([for install_initd])
LSB_INSTALL_PATH=""
for i in $BINSEARCHPATH; do
   if test -e "$i/install_initd"; then
      LSB_INSTALL_PATH="$i"
      break
   fi
done
if test "$LSB_INSTALL_PATH" != ""; then
   AC_MSG_RESULT([found in $LSB_INSTALL_PATH])
else
   AC_MSG_RESULT(no)
fi

AC_MSG_CHECKING([for rpm install])
AC_ARG_ENABLE(rpm_install,
  [  --enable-rpm-install    enable rpm install [default=no]],
  rpm_install=$enableval, rpm_install=no)
if test "$rpm_install" = "yes"; then
   AC_MSG_RESULT(yes)
else
   AC_MSG_RESULT(no)
fi

AC_SUBST(CHKCONFIG_PATH)
AC_SUBST(LSB_INSTALL_PATH)
AC_SUBST(rpm_install)

AC_CONFIG_FILES([Makefile])
AC_OUTPUT
